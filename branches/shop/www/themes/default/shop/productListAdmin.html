<script language="JavaScript">
<!--
function selectAll(mode, i) {
    if (i == 1) {
        obj = document.forms['product'].elements;
    } else {
        obj = document.forms['product'].elements;
    };
    
    for (i = 0; i < obj.length; i++)
        if (obj[i].name == 'frmDelete[]') obj[i].checked = mode;
    
}

function selchkAll(chk, i) {
    if (chk.checked) {
        selectAll(true, i);
    }
    else {
        selectAll(false, i);
    }
}
-->
</script>
  <flexy:include src="resourceChooser.html" />
  <h1 class="pageTitle">{translate(pageTitle)}</h1>
  <span flexy:if="msgGet()">{msgGet()}</span>
  <table class="wide">
  <tr> 
     <td>
  		<h2 class="sectionHeader"><strong>{translate(#Current Category#)}:</strong> {currentCat}</h2>
  		<h3 class="colHeader"><strong>{translate(#You are here#)}:</strong> {path:h}</h3>
  		<strong>Total products: </strong> {totalItems}
	</td>
  </tr>
  </table>		
<form name="product" method="post" flexy:ignore id="product">
  <input type="hidden" name="action" value="delete" />
  <input type="hidden" name="frmCatID" value="{catID}" />   
  {if:pager}<flexy:include src="pager.html" />{end:}
  <table class="wide">
    <tr> 
      <td colspan="6">
	  <input type="button" value="{translate(#New product#)}" onclick="javascript:document.location.href='{makeUrl(#add#)}frmCatID/{catID}/'" /> 
      </td>
    </tr>
    <tr> 
      <th width="5"><div align="center"><input type="checkbox" name="selAll" value="checkbox" onclick="selchkAll(this, 1);"></div></th>
      <th width="10" ><a class="header" href="{makeUrl()}frmCatID/{catID}/frmSortBy/product_id/frmSortOrder/{sortOrder}/">{translate(#id#)}</a></th>
      <th width="20" nowrap><a class="header" href="{makeUrl()}frmCatID/{catID}/frmSortBy/cod1/frmSortOrder/{sortOrder}/">{translate(#Cod1#)}</a></th>
      <th width="20" ><a class="header" href="{makeUrl()}frmCatID/{catID}/frmSortBy/manufacturer/frmSortOrder/{sortOrder}/">{translate(#Manufacturer#)}</a></th>
      <th width="50%"><a class="header" href="{makeUrl()}frmCatID/{catID}/frmSortBy/name/frmSortOrder/{sortOrder}/">{translate(#Product#)}</a></th>
      <th width="30%">{translate(#Short description#)}</th>
      <th width="10"><a class="header" href="{makeUrl()}frmCatID/{catID}/frmSortBy/last_updated/frmSortOrder/{sortOrder}/">{translate(#Updated#)}</a></th>
      <th width="10"><a class="header" href="{makeUrl()}frmCatID/{catID}/frmSortBy/promotion/frmSortOrder/{sortOrder}/">{translate(#Promo#)}</a></th>
      <th width="10"><a class="header" href="{makeUrl()}frmCatID/{catID}/frmSortBy/price/frmSortOrder/{sortOrder}/">{translate(#Price#)}</a></th>
      <th width="10"><a class="header" href="{makeUrl()}frmCatID/{catID}/frmSortBy/currency/frmSortOrder/{sortOrder}/">{translate(#Currency#)}</a></th>
    </tr>
    {if:aPagedData[data]}
    <tr class="{switchRowClass()}" flexy:foreach="aPagedData[data],key,valueObj"> 
      <td width="5" align="center"> <input class="noBorder" type="checkbox" name="frmDelete[]" value="{valueObj[product_id]}" /></td>
      <td width="10">{valueObj[product_id]}</td>
      <td width="20">{valueObj[cod1]}</td>
      <td width="20">{valueObj[manufacturer]}</td>
      <td width="50%"><a href="{makeUrl(#edit#)}frmProdId/{valueObj[product_id]}/">{valueObj[name]}</a></td>
      <td width="30%">{valueObj[short_description]}</td>
      <td width="10">{valueObj[last_updated]}</td>
      <td width="10" align="center">{valueObj[promotion]}</td>
      <td width="10" align="right">{this.plugin(#formatPrice#,valueObj[price])}</td>
      <td width="10" align="center">{valueObj[currency]}</td>
    </tr>
    <tr> 
      <td colspan="6">{translate(#With selected product(s)#)}: 
        <input type="SUBMIT" name="delete" value="{translate(#delete#)}" onclick="return confirmSubmit('product', 'products')" /></td>
    </tr>
    {else:} 
    <tr> 
      <td colspan="6">{translate(#No products#)}</td>
    </tr>
    {end:}
  </table>
</form>
