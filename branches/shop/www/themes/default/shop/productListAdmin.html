<script language="JavaScript">
<!--
function selectAll(mode, i) {
    if (i == 1) {
        obj = document.forms['product'].elements;
    } else {
        obj = document.forms['product'].elements;
    };
    
    for (i = 0; i < obj.length; i++)
        if (obj[i].name == 'frmDelete[]') obj[i].checked = mode;
    
}

function selchkAll(chk, i) {
    if (chk.checked) {
        selectAll(true, i);
    }
    else {
        selectAll(false, i);
    }
}
-->
</script>

<flexy:include src="resourceChooser.html" />
<!-- <link rel="stylesheet" type="text/css" href="{webRoot}/themes/{theme}/shop/shopAdmin.css" /> -->

  <h1 class="pageTitle">{translate(pageTitle)}</h1>
  <span flexy:if="msgGet()">{msgGet()}</span>
  <table border="0" width="92%" align="center" border="0">
  <tr> 
     <td>
        <h2 class="colHeader"><strong>{translate(#Current Category#)}:</strong>
	{if:currentCat}
           {currentCat}
    {else:}
	   {translate(#Top#)}
	{end:}
        </h2>
        <h3 class="colHeader"><strong>{translate(#You are here#)}:</strong>
	{if:path}
	   {path:h}
    {else:}
	   {translate(#Top#)}
	{end:}
	</h3>
           <strong>{translate(#Total products#)}: </strong> {totalItems}
     </td>
   </tr>
  </table>		
<form name="product" method="post" flexy:ignore id="product">
<input type="button"  class="wideButton" value="{translate(#New product#)}" onclick="javascript:document.location.href='{makeUrl(#add#)}frmCatID/{catID}/'" />
  <input type="hidden" name="action" value="delete" />
  <input type="hidden" name="frmCatID" value="{catID}" />   
  {if:pager}<flexy:include src="pager.html" />{end:}
  {if:aPagedData[data]}

  <table border="0" cellspacing="1" cellpadding="5" width="98%" border="0">
  <thead>
    <tr class="dataTable">
      <th width="5" style="vertical-align: middle;"><input type="checkbox" name="selAll" value="checkbox" onclick="selchkAll(this, 1);"></th>
      <th width="10"><a href="{makeUrl()}frmCatID/{catID}/frmSortBy/product_id/frmSortOrder/{sortOrder}/">{translate(#id#)}</a></th>
      <th width="20"><a href="{makeUrl()}frmCatID/{catID}/frmSortBy/cod1/frmSortOrder/{sortOrder}/">{translate(#Cod1#)}</a></th>
      <th width="20"><a href="{makeUrl()}frmCatID/{catID}/frmSortBy/manufacturer/frmSortOrder/{sortOrder}/">{translate(#Manufacturer#)}</a></th>
      <th width="50%"><a href="{makeUrl()}frmCatID/{catID}/frmSortBy/name/frmSortOrder/{sortOrder}/">{translate(#Product#)}</a></th>
      <th width="10"><a href="{makeUrl()}frmCatID/{catID}/frmSortBy/promotion/frmSortOrder/{sortOrder}/">{translate(#Promo#)}</a></th>
      <th width="10"><a href="{makeUrl()}frmCatID/{catID}/frmSortBy/price/frmSortOrder/{sortOrder}/">{translate(#Price#)}</a></th>
      <th width="10"><a href="{makeUrl()}frmCatID/{catID}/frmSortBy/price/frmSortOrder/{sortOrder}/">{translate(#Price with VAT#)}</a></th>
      <th width="10"><a href="{makeUrl()}frmCatID/{catID}/frmSortBy/currency/frmSortOrder/{sortOrder}/">{translate(#Ordering#)}</a></th>
    </tr>
  </thead>
  <tbody>
    <tr class="{switchRowClass()}" flexy:foreach="aPagedData[data],key,valueObj">
      <td align="center"><input type="checkbox" name="frmDelete[]" value="{valueObj[product_id]}" /></td>
      <td>{valueObj[product_id]}</td>
      <td>{valueObj[cod1]}</td>
      <td>{valueObj[manufacturer]}</td>
      <td><a href="{makeUrl(#edit#)}frmProdId/{valueObj[product_id]}/">{valueObj[name]}</a></td>
      <td align="center">{valueObj[promotion]}</td>
      <td align="right">{this.plugin(#formatPrice#,valueObj[price])}</td>
      <td align="right">{this.plugin(#formatPrice#,valueObj[priceVAT])}</td>
      <td align="center"><input class="textInput" type="text" name="productOrder[{valueObj[product_id]}]" value="{valueObj[order_id]}" size="5" /></td>
    </tr>
    <tr class="dataTable-tr-footer">
      <td colspan="4">{translate(#With selected product(s)#)}:
        <input class="narrowButton" type="submit" name="delete" value="{translate(#delete#)}" onclick="return confirm('{translate(#Do you want to delete products?#)}')" />
      </td>
      <td colspan="4" align="right">{translate(#Update ordering information#)}:
        <input class="narrowButton" type="submit" name="updateOrder" value="{translate(#update#)}" onclick="return confirm('{translate(#Do you want to update ordering status?#)}')" />
      </td>
    </tr>
    </tbody>
  </table>
  {end:}
</form>
