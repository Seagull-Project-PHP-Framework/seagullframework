<flexy:include src="resourceChooser.html" />
<div align="center">
<a href="{makeUrl()}">{translate(#General discount list#)}</a> &nbsp; &nbsp;
<a href="{makeUrl(listProd)}">{translate(#Product discount list#)}</a>
</div> 
   
    <h1 class="pageTitle">{translate(pageTitle)}</h1>
    <span flexy:if="msgGet()">{msgGet()}</span> 
    {if:pager}<flexy:include src="pager.html" />{end:}
{if:product}
<form name="users" method="post" flexy:ignore id="users">
  <input type="hidden" name="action" value="insertProd" />
  <input type="hidden" name="frmProdId" value="{frmProdId}" />
  <table class="wide">
    <tr>
       <th>{translate(#Username#)}</th>
       <th width="100">{translate(#Price#)}</th>
    </tr>
    <tr class="{switchRowClass()}"> 
      <td>
        <div class="error" flexy:if="error[usr_id]">{error[usr_id]} </div>
	<select name="usr_id" id="usr_id" size="1">
	  <option value="-1">{translate(#Select one user...#)}</option>
	    {userList:h}
	  </select>
      </td>
      <td width="200"> 
        <div class="error" flexy:if="error[discount]">{error[discount]} </div>
        <div class="error" flexy:if="error[currency]">{error[currency]} </div>
        <input name="price" type="text" id="price" value="{price}" size="9" maxlength="10">
        <select name="currency" id="currency" size="1" >
            {product_currency:h}
        </select>
      </td>
    </tr>
    <tr> 
      <td colspan="2">{translate(#With selected user(s)#)}: 
        <input type="submit" name="add" value="{translate(#Add user#)}" onclick="return confirmSubmit('{translate(#user#)}', 'users')" /></td>
    </tr>
  </table>
</form>
{end:}

 <form name="users" method="post" flexy:ignore id="users">
    <input type="hidden" name="action" value="deleteProd" />   
 
  <table class="wide">
    <tr flexy:if="product">
      <td colspan="5"><strong>Product:</strong> <a href="{makeUrl(#edit#,#shopadmin#)}frmProdId/{frmProdId}/">{product}</a></td>
      <td colspan="2"><strong>{translate(#Retail price#)}:</strong> {this.plugin(#formatPrice#,priceVAT)} <strong>{translate(#Price with VAT#)}</strong></td>
      </td>
    </tr>
    <tr flexy:if="aPagedData[data]">
      <th>{translate(#Select#)}</th>
      <th width="20"><a class="header" href="{makeUrl(#listProd#)}frmSortBy/usr_id/frmSortOrder/{sortOrder}/">{translate(#UID#)}</a></th>
      <th width="60"><a class="header" href="{makeUrl(#listProd#)}frmSortBy/username/frmSortOrder/{sortOrder}/">{translate(#Username#)}</a></th> 
      <th width="10"><a class="header" href="{makeUrl(#listProd#)}frmSortBy/product_id/frmSortOrder/{sortOrder}/">{translate(#PID#)}</a></th>
      <th><a class="header" href="{makeUrl(#listProd#)}frmSortBy/name/frmSortOrder/{sortOrder}/">{translate(#Product#)}</a></th>
      <th width="100"><a class="header" href="{makeUrl(#listProd#)}frmSortBy/default_price/frmSortOrder/{sortOrder}/">{translate(#Price with VAT#)}</a></th>
      <th width="100" nowrap><a class="header" href="{makeUrl(#listProd#)}frmSortBy/price/frmSortOrder/{sortOrder}/">{translate(#Discount#)} ({translate(#Price with VAT#)})</a></th>
    </tr>
    <tr class="{switchRowClass()}" flexy:foreach="aPagedData[data],key,aValue"> 
      <td align="center"><input class="noBorder" type="checkbox" name="frmDelete[]" value="{aValue[price_id]}" /></td>
      <td width="20">{aValue[usr_id]}</td>
      <td width="60">{aValue[username]}</td> 
      <td width="10">{aValue[product_id]}</td>
      <td><a href="{makeUrl(#edit#,#shopadmin#)}frmProdId/{frmProdId}/">{aValue[name]}</a></td>
      <td width="100" align="right" nowrap>{aValue[default_priceVAT]} {translate(aValue[default_currency])}</td>
      <td width="100" align="right" nowrap>{aValue[priceVAT]} {translate(aValue[currency])}</td>
    </tr>
    <tr flexy:if="aPagedData[data]">
      <td colspan="7">{translate(#With selected user(s)#)}:
        <input type="submit" name="delete" value="{translate(#delete#)}" onclick="return confirmSubmit('{translate(#user#)}', 'users')" /></td>
    </tr>
  </table>
</form>

