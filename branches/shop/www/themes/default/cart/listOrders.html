<script language="JavaScript">
<!--
function selectAll(mode, i) {
    if (i == 1) {
        obj = document.forms['orders'].elements;
    } else {
        obj = document.forms['orders'].elements;
    };
    
    for (i = 0; i < obj.length; i++)
        if (obj[i].name == 'frmDelUpd[delete][]') obj[i].checked = mode;
    
}

function selchkAll(chk, i) {
    if (chk.checked) {
        selectAll(true, i);
    }
    else {
        selectAll(false, i);
    }
}
-->
</script>
<flexy:include src="resourceChooser.html" />
<h1 class="pageTitle">{translate(pageTitle)}</h1>
<span flexy:if="msgGet()">{msgGet()}</span> 
{if:pager}<flexy:include src="pager.html" />{end:}

<form name="orders" method="post" flexy:ignore id="orders">
  <input type="hidden" name="action" value="delete" />   
  <strong>{translate(#Total orders#)}:</strong> {totalItems}

  <table class="full">
    <tr>
      <th width="5"><div align="center"><input type="checkbox" name="selAll" value="checkbox" onclick="selchkAll(this, 1);"></div></th>
      <th width="10"><a class="header" href="{makeUrl()}frmSortBy/cart_id/frmSortOrder/{sortOrder}/">{translate(#ID#)}</a></th>
      <th width="100"><a class="header" href="{makeUrl()}frmSortBy/username/frmSortOrder/{sortOrder}/">{translate(#User#)}</a></th>
      <th><a class="header" href="{makeUrl()}frmSortBy/name/frmSortOrder/{sortOrder}/">{translate(#Name#)}</a></th>
      <th width="80"><a class="header" href="{makeUrl()}frmSortBy/org_name/frmSortOrder/{sortOrder}/">{translate(#Organisation#)}</a></th>
      <th width="120"><a class="header" href="{makeUrl()}frmSortBy/c.date_created/frmSortOrder/{sortOrder}/">{translate(#Created#)}</a></th>
      <th width="70"><a class="header" href="{makeUrl()}frmSortBy/total/frmSortOrder/{sortOrder}/">{translate(#Total#)}</a></th>
      <th width="50"><div align="right"><a class="header" href="{makeUrl()}frmSortBy/status/frmSortOrder/{sortOrder}/">{translate(#Status#)}</a></div></th>
    </tr>
    <tr class="{switchRowClass()}" flexy:foreach="aPagedData[data],key,aValue"> 
      <td align="center"><input class="noBorder" type="checkbox" name="frmDelUpd[delete][]" value="{aValue[cart_id]}" /></td>
      <td><a href="{makeUrl(#view#)}frmOrderID/{aValue[cart_id]}/">{aValue[cart_id]}</a></td>
      <td><a href="{makeUrl(#view#)}frmOrderID/{aValue[cart_id]}/">{aValue[username]}</a></td>
      <td>{aValue[name]}</td>
      <td>{aValue[org_name]}</td>
      <td>{aValue[date_created]}</td>
      <td>{this.plugin(#formatPrice#,aValue[total]):h} Lt</td>
      <td align="right"><select name="frmDelUpd[update][{aValue[cart_id]}]">{generateSelect(aValue[personalStatuses],aValue[status_id]):h}</select></td>
    </tr>
    <tr>
      <td colspan="8">{translate(#With selected orders(s)#)}: 
        <input type="submit" name="delete" value="{translate(#Execute#)}" onclick="javascript:if(!confirm('{translate(#Do you really want to make changes?#)}')) return false;" /></td>
    </tr>
  </table>
</form>
