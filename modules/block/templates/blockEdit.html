<form action="" method="post" name="frmBlock" flexy:ignore id="frmBlock">
    <p>
        <input name="mode" type="hidden" value="{mode}" />
        <input name="block[edit]" type="hidden" value="1" />
    {if:isAdd}
        <input name="action" type="hidden" value="insert" />
        <input name="isadd" type="hidden" value="1" />
    {else:}
        <input name="action" type="hidden" value="update" />
        <input name="block[block_id]" type="hidden" value="{block.block_id}" />
    {end:}
    </p>
    <h1 class="pageTitle">{translate(pageTitle)} {if:mode}:: {translate(mode)}{end:}</h1>
    <span flexy:if="msgGet()">{msgGet()}</span>

    <table class="narrow">
        <tr>
            <th colspan="3">{translate(#Block Details#)}</th>
        </tr>

        <tr flexy:if="!isAdd">
            <td class="fieldName">{translate(#ID#)}</td>
            <td align="left">{block.block_id}</td>
        </tr>

        <tr>
            <td class="fieldName" width="25%"><span class="error">*</span>{translate(#Block Class Name#)}</td>
            <td align="left" width="75%">
                <div class="error" flexy:if="error[name]">
                    {translate(error[name])}
                </div>
                <select name="block[name]" onchange="document.frmBlock.submit()">
                    <option value="">- {translate(#Choose class name#)} -</option>
                    {generateSelect(aAllBlocks,block.name):h}
                </select>
            </td>
        </tr>

        <tr flexy:if="details.name">
            <td class="fieldName">{translate(#Block name#)}</td>
            <td align="left">{details.name}</td>
        </tr>

        <tr flexy:if="details.description">
            <td class="fieldName">{translate(#Block description#)}</td>
            <td align="left">{details.description}</td>
        </tr>

        <tr>
            <td class="fieldName"><span class="error">*</span>{translate(#Display Title#)}</td>
            <td align="left">
                <div class="error" flexy:if="error[title]">
                    {translate(error[title])}
                </div>
            <input name="block[title]" type="text" value="{block.title}" /></td>
        </tr>

        <tr>
            <td class="fieldName">{translate(#Title class#)}</td>
            <td align="left"><input name="block[title_class]" type="text" value="{block.title_class}" /></td>
        </tr>

        <tr>
            <td class="fieldName">{translate(#Body class#)}</td>
            <td align="left"><input name="block[body_class]" type="text" value="{block.body_class}" /></td>
        </tr>

        <tr>
            <td class="fieldName"><span class="error">*</span>{translate(#Sections#)}</td>
            <td align="left">
                <div class="error" flexy:if="error[sections]">
                    {translate(error[sections])}
                </div>
                <select name="block[sections][]" multiple="multiple" size="15">
                    {generateSelect(aSections,block.sections,1):h}
                </select>
            </td>
        </tr>

        <tr>
            <td class="fieldName"><span class="error">*</span>{translate(#Can view#)}</td>
            <td align="left">
                <div class="error" flexy:if="error[roles]">
                    {translate(error[roles])}
                </div>
                <select name="block[roles][]" multiple="multiple" size="5">
                    {generateSelect(aRoles,block.roles,1):h}
                </select>
            </td>
        </tr>

        <tr>
            <td class="fieldName">{translate(#Position#)}</td>
            <td align="left">
                <select name="block[position]">
                    {generateSelect(aBlocksNames,block.position):h}
                </select>
            </td>
        </tr>

        <tr>
            <td class="fieldName">{translate(#Cache status#)}</td>
            <td align="left"><input type="checkbox" name="block[is_cached]" flexy:raw="{blockIsCached}" />{translate(#check to cache block content#)}</td>
        </tr>

        <tr flexy:if="checked">
            <td class="fieldName">{translate(#Status#)}</td>
            <td align="left"><input type="checkbox" name="block[is_enabled]" flexy:raw="{blockIsEnabled}" />{translate(#check to activate#)}</td>
        </tr>

        {if:aParams}
            <tr>
                <th colspan="3">{translate(#Block Parameters#)}</th>
            </tr>
            <flexy:include src="editParams.html" />
        {end:}

        <tr></tr>
        <tr>
            <td valign="top" align="center" colspan="2">
                <input class="wideButton" name="submitted" value="{translate(#Submit#)}" type="submit" />&nbsp;
                <input class="wideButton" type="button" value="{translate(#Cancel#)}"
                        onclick="javascript:document.location.href='{makeUrl(##,#block#,#block#)}'" />
            </td>
        </tr>

        <tr>
            <td valign="top" align="center" colspan="2">
                <span class="error">*</span>
                <span>{translate(#denotes required field#)}</span>
            </td>
        </tr>

</table>
</form>
