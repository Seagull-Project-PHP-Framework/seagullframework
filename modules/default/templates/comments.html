<h2>comments</h2>

{if:aComments}

<div id="comments" flexy:foreach="aComments,key,oComment">
    <p><a href="">#{increment(key)}</a> <a href="{oComment.url}">{oComment.full_name}</a> {formatDatePretty(oComment.full_name.date_created)}</p>
    <hr />
    <p>{oComment.body:h}</p>
</div>

{else:}
<i>be the first to leave a comment</i>
{end:}

<div id="addComment">
<form action="{makeUrl(#insert#,#comment#,#comment#)}" method="post" flexy:ignore>
    <fieldset class="hide">
        <input type="hidden" name="comment[entity_name]" value="faq" />
        <input type="hidden" name="frmCallerMod" value="{getCurrentModule()}" />
        <input type="hidden" name="frmCallerMgr" value="{getCurrentManager()}" />
        <input type="hidden" name="frmCallerTmpl" value="{getCurrentTemplate()}" />
    </fieldset>

    <fieldset>
        <legend>Enter your comment</legend>
        <dl class="onSide">
            <dt><label for="comment[full_name]">Name:</label></dt>
            <dd class="error" flexy:if="error[full_name]">{translate(error[full_name])}</dd>
            <dd>
                <input type="text" name="comment[full_name]" id="comment[full_name]" value="{comment.full_name}" />
            </dd>

            <dt><label for="comment[email]">Email:</label></dt>
            <dd>
                <div class="error" flexy:if="error[email]">{translate(error[email])}</div>
                <input type="text" name="comment[email]" id="comment[email]" value="{comment.email}" />
            </dd>

            <dt><label for="comment[title]">Homepage:</label></dt>
            <dd>
                <input type="text" name="comment[subject]" id="comment[subject]" value="{comment.subject}" />
            </dd>

            <dt><label for="comment[body]">Comment:</label></dt>
            <dd>
                <div class="error" flexy:if="error[body]">{translate(error[body])}</div>
                <textarea name="comment[body]" id="comment[body]" rows="10" cols="50"/>{comment.body}</textarea>
            </dd>

            <dt><label for="comment[notify]">&nbsp;</label></dt>
            <dd>
                <input type="checkbox" name="comment[notify]" id="comment[notify]" value="{comment.notify}" />
                E-mail notification
            </dd>

            <dt>&nbsp;</dt>
            <dd>
                <input type="submit" name="submitted" value="preview" />
                <input type="submit" name="submitted" value="post" />
            </dd>
        </dl>
    </fieldset>

</form>
</div>