<script type="text/javascript">
function addFormValue(myElement, form)
{
    var myForm = document.getElementById(form);

    newInput = document.createElement("input");
    newInput.setAttribute('name', myElement.name);
    newInput.setAttribute('value', myElement.value);
    newInput.setAttribute('type', 'hidden');
    myForm.appendChild(newInput);
}

function toggleAliasElements(myCheckbox)
{
        var myCheckbox = document.getElementById('page[uri_alias_enable]').checked;
        var aliasList = document.getElementById('urialiases');
        var aliasValue = document.getElementById('page[uri_alias]');

        if (myCheckbox) {
            //aliasList.disabled = false;
            aliasValue.disabled = false;
        } else {
            //aliasList.disabled = true;
            aliasValue.disabled = true;
        }


}
</script>

    <form method="post" name="sectionEdit" flexy:ignore id="sectionEdit">
        <input type="hidden" name="action" value="{action}" />
        <input type="hidden" name="page[section_id]" value="{section[section_id]}" />
        <input type="hidden" name="page[order_id]" value="{section[order_id]}" />
        <input type="hidden" name="page[original_parent_id]" value="{section[parent_id]}" />
        <input type="hidden" name="page[original_is_enabled]" value="{section[is_enabled]}" />
        <input type="hidden" name="page[trans_id]" value="{section[trans_id]}" />
        {foreach:availableLangs,langID,langName}
        <input type="hidden" name="frmAvailableLangs[{langID}]" value="{langID}" />
        {end:}

    <h1 class="pageTitle">{translate(pageTitle)}</h1>
    <span flexy:if="msgGet()">{msgGet()}</span>
    <table class="wide">
        <tr>
            <td colspan="2" align="center">{foreach:error,error,string} <strong>{string}</strong><br />
            {end:}</td>
        </tr>

        <tr>
            <td colspan="2">
                <p>{translate(#intro text 1#)}</p>
                <p>{translate(#intro text 2#)}</p>
                <p>&nbsp;</p>
            </td>
        </tr>

        {if:section[section_id]}
            <tr>
                <th align="left">{translate(#Section ID#)}</th>
                <td>{section[section_id]}</td>
            </tr>
        {end:}

        {if:isEqual(conf[translation][container],#db#)}
        <tr>
            <th align="left">{translate(#Language#)}</th>

            {if:actionIsAdd}
            <td><select name="frmNavLang" id="frmNavLang"><option value="{navLang}">{fullNavLang}</option></select></td>
            {else:}
            <td><select name="frmNavLang" id="frmNavLang"
                        onchange="addFormValue(this, 'sectionEdit'); self.document.sectionEdit.submit()">
                {generateSelect(availableLangs,navLang):h}
                </select>
            </td>
            {end:}
        </tr>
        {end:}

        <tr>
            <th align="left">{translate(#Page Title#)} - {fullNavLang}:</th>
            <td><input type="text" name="page[title]" value="{section[title]:h}" />
                <input type="hidden" name="page[title_original]" value="{section[title]:h}" /></td>
        </tr>

        <tr>
            <th align="left">{translate(#Parent Page#)}:</th>
            <td>
                <select name="page[parent_id]">
                    {sectionNodesOptions:h}
                </select>
            </td>
        </tr>

        <tr>
            <th align="left">{translate(#Target#)}:</th>

            <td>
                <select name="page[articleType]" multiple
                    onchange="addFormValue(this, 'sectionEdit'); self.document.sectionEdit.submit()">

                <option value="static" flexy:raw="{staticSelected}">
                    {translate(#static articles#)}
                </option>

                <option value="dynamic" flexy:raw="{dynamicSelected}">
                    {translate(#dynamic pages#)}
                </option>

                {if:conf[PageMgr][wikiScreenTypeEnabled]}
                <option value="wiki" flexy:raw="{wikiSelected}">
                    wiki
                </option>
                {end:}
                <option value="uriExternal" flexy:raw="{uriExternalSelected}">
                    {translate(#external URI#)}
                </option>
                </select>
                <br />
                {if:staticSelected}
                    <select size="1" name="page[staticArticleId]">
                        {generateSelect(aStaticArticles,section[resource_uri],currentLang):h}
                    </select> {translate(#static article title#)}
                {end:}
                {if:dynamicSelected}
                    <select size="1" name="page[module]"
                        onchange="addFormValue(this, 'sectionEdit'); self.document.sectionEdit.submit()">
                        {generateSelect(aModules,section[module]):h}
                    </select> {translate(#module#)}<br />
                    <select size="1" name="page[manager]"
                        onchange="addFormValue(this, 'sectionEdit'); self.document.sectionEdit.submit()">
                        {generateSelect(aManagers,section[manager]):h}
                    </select> {translate(#manager#)}<br />
                    <select size="1" name="page[actionMapping]">
                        <option value="">{translate(#none#)}
                        {generateSelect(aActions,section[actionMapping]):h}
                    </select> {translate(#action#)}
                {end:}
                {if:wikiSelected}
                    <input type="text" size="50" name="page[resource_uri]" value="{section[resource_uri]}"> {translate(#wiki page URL#)}
                {end:}
                {if:uriExternalSelected}
                    <input type="text" size="50" name="page[resource_uri]" value="{section[resource_uri]}"> {translate(#external page URI#)}
                {end:}
            </td>
        </tr>

        <tr>
            <th align="left">{translate(#Alias#)}:</th>
            <td><input type="checkbox" name="page[uri_alias_enable]" id="page[uri_alias_enable]" onclick="toggleAliasElements();">{translate(#Add an alias?#)}
<!--                <select name="urialiases" id="urialiases" onChange="document.sectionEdit.elements['page[uri_alias]'].value=document.sectionEdit.urialiases.value">
                    <option value="">- {translate(#Choose URI from Aliases#)} -</option>
                    {generateSelect(aUriAliases,page[resource_uri]):h}
                </select><br />-->
                <input type="text" size="50" name="page[uri_alias]" id="page[uri_alias]" value="{section[uri_alias]}"> {translate(#alias URI#)}
            </td>
        </tr>

        <tr>
            <th align="left">{translate(#Additional params#)}:</th>
            <td><input type="text" name="page[add_params]" value="{section[add_params]}" /> {translate(#separate with slashes (/)#)}</td>
        </tr>

        <tr>
            <th align="left">{translate(#Anchor#)}:</th>
            <td><input type="text" name="page[anchor]" value="{section[anchor]}" /> {translate(#just the anchor name#)}</td>
        </tr>

		 <tr>
            <th align="left">{translate(#Access Key#)}:</th>
            <td><input type="text" name="page[access_key]" value="{section[access_key]}" /> {translate(#Any number, which can be pressed with the ALT-key to load the page.#)}</td>
        </tr>

        <tr>
            <th align="left">{translate(#Rel Marker#)}:</th>
            <td><input type="text" name="page[rel]" value="{section[rel]}" /> {translate(#Additional navigation aids for better accessibility. Use values like "home", "prev" or "next".#)}</td>
        </tr>

        <tr>
            <th align="left">{translate(#Status#)}:</th>
            <td><input type="checkbox" name="page[is_enabled]" flexy:raw="{pageIsEnabled}" /> {translate(#check to activate#)}</td>
        </tr>

        <tr>
            <th align="left">{translate(#Can view#)}:</th>

            <td>
                <select size="5" name="page[perms][]" multiple="multiple">
                    {generateSelect(aRoles,aSelectedRoles,1):h}
                </select>
            </td>
        </tr>

        <tr>
            <td colspan="2" align="center">
                <input class="wideButton" type="submit" name="submitted" value="{translate(#Save#)}" />&nbsp;
                <input class="wideButton" type="button" name="cancel" value="{translate(#Cancel#)}"
                    onclick="document.location.href='{makeUrl(#list#,#page#,#navigation#)}'" />
            </td>
        </tr>
    </table>
</form>
