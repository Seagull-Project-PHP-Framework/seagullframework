<span flexy:if="msgGet()">{msgGet()}</span>

<form name="frmFilterSwitcher" method="get" flexy:ignore id="frmFilterSwitcher">
    <fieldset class="main">
        <p>
            <label>{translate(#filter by module#)}</label>
            <select name="frmModuleId"
                onChange="javascript:if(getSelectedValue(self.document.frmFilterSwitcher.frmModuleId) == 0) {document.location.href='{makeUrl(#list#,#permission#,#user#)}'} else {document.location.href='{makeUrl(#list#,#permission#,#user#)}frmModuleId/' + getSelectedValue(self.document.frmFilterSwitcher.frmModuleId) + '/'};" />    
                <option value="0" />{translate(#all#)}
                {generateSelect(aModules,currentModule):h}
            </select>
        </p>
    </fieldset>
    <div class="spacer"></div>
</form>

<form name="perms" method="post" flexy:ignore id="perms">
    <fieldset class="main">
        <input type="hidden" name="action" value="delete" />
        
        <table class="full">
            <thead>
                <tr flexy:if="pager">
                    <td colspan="5">
                        <flexy:include src="pager.html" />
                    </td>
                </tr>
                <tr>
                    <th class="id"><a href="{makeUrl(#list#,#permission#,#user#,##,#frmSortBy|permission_id||frmSortOrder|sortOrder#)}">#</a></th>
                    <th class="select">
                        <span class="tipOwner">
                            <span class="tipText" id="becareful">Be Careful !</span>
                            <input type="checkbox" name="checkAll" id="checkAll" onclick="javascript:applyToAllCheckboxes('perms', 'frmDelete[]', this.checked)" />
                        </span>
                    </th>
                    <th class="left"><a href="{makeUrl(#list#,#permission#,#user#,##,#frmSortBy|name||frmSortOrder|sortOrder#)}">{translate(#Name#)}</a></th>
                    <th class="left">{translate(#Description#)}</th>
                    <th>{translate(#Edit#)}</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <td>&nbsp;</td>
                    <td class="right">
                        <img src="{webRoot}/themes/{theme}/images/16/arrow_right.png" alt="" />
                    </td>
                    <td colspan="4">
                        {translate(#With selected permission(s)#)}: 
                        <input type="submit" name="delete" value="{translate(#delete#)}" onClick="return confirmSubmit('{translate(#permission#)}', 'perms')" />
                    </td>
                </tr>
                <tr flexy:if="pager">
                    <td colspan="5">
                        <flexy:include src="pager.html" />
                    </td>
                </tr>
            </tfoot>
            <tbody>
                <tr class="{switchRowClass()}" flexy:foreach="aPagedData[data],key,aValue">
                    <td>{aValue[permission_id]}</td>
                    <td><input type="checkbox" name="frmDelete[]" value="{aValue[permission_id]}" /></td>
                    <td class="left">{aValue[name]}</td>
                    <td class="left">{aValue[description]}</td>
                    <td><a href="{makeUrl(#edit#,#permission#,#user#,aPagedData[data],#frmPermId|permission_id#,key)}">
                        <img src="{webRoot}/themes/{theme}/images/16/action_edit.gif" alt="{translate(#edit#)}" /></a>
                    </td>
                </tr>
                
            </tbody>
        </table>
    </fieldset>
</form>
