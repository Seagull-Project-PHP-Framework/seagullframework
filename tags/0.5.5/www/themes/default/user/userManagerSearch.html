<script type="text/javascript">
    function updateFormInterface()
    {
        f = document.forms['frmSearch'];
        v = f.elements['search[reg_date_mod]'].value == 0 ? true : false;
        f.elements['search[reg_date1][year]'].disabled = v;
        f.elements['search[reg_date1][month]'].disabled = v;
        f.elements['search[reg_date1][day]'].disabled = v;
        v = f.elements['search[reg_date_mod]'].value == 4 ? false : true;
        f.elements['search[reg_date2][year]'].disabled = v;
        f.elements['search[reg_date2][month]'].disabled = v;
        f.elements['search[reg_date2][day]'].disabled = v;
    }
</script>

<form action="" method="post" name="frmSearch" flexy:ignore id="frmSearch">
<p><input name="action" type="hidden" value="search" /></p>
<h1 class="pageTitle">{translate(pageTitle)}</h1>
<span flexy:if="msgGet()">{msgGet()}</span>

<table class="narrow">
    <tr><th colspan="2">{translate(#Search Criteria#)}</th></tr>
    <tr>
        <td class="fieldName" width="50%">{translate(#User ID#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[user_id]">{error[user_id]}</div>
        <input name="search[user_id]" type="text" value="{search.user_id}" />
        </td>
    </tr>

    <tr>
        <td class="fieldName" width="50%">{translate(#Username#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[username]">{error[username]}</div>
        <input name="search[username]" type="text" value="{search.username}" />
        </td>
    </tr>

    <tr>
        <td class="fieldName" width="50%">{translate(#First Name#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[first_name]">{error[first_name]}</div>
        <input name="search[first_name]" type="text" value="{search.first_name}" />
        </td>
    </tr>

    <tr>
        <td class="fieldName" width="50%">{translate(#Last Name#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[last_name]">{error[last_name]}</div>
        <input name="search[last_name]" type="text" value="{search.last_name}" />
        </td>
    </tr>

    <tr>
        <td class="fieldName" width="50%">{translate(#Email#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[email]">{error[email]}</div>
        <input name="search[email]" type="text" value="{search.email}" />
        </td>
    </tr>
    
    <tr>
        <td class="fieldName" width="50%">{translate(#Role#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[roles]">{error[roles]}</div>
        <select name="search[roles]" multiple size="5">
            {generateSelect(aRoles,user.role_id):h}
        </select>
        </td>
    </tr>
    
    <tr if:orgOptions>
        <td class="fieldName" width="50%">{translate(#Organisation#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[orgs]">{error[orgs]}</div>
        <select name="search[orgs]" multiple size="5">
            {generateSelect(aOrgs,user.organisation_id):h}
        </select>
        </td>
    </tr>
    
    <tr>
        <td class="fieldName" width="50%">{translate(#Register Date#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[reg_date_mod]">{error[reg_date_mod]}</div>
        <select name="search[reg_date_mod]" onchange="javascript:updateFormInterface(); return false;">
            {generateSelect(regDateMod,search[reg_date_mod]):h}
        </select><br/>
        <div class="error" flexy:if="error[reg_date1]">{error[reg_date1]}</div>
        {regDate1:h}<br/>
        <div class="error" flexy:if="error[reg_date2]">{error[reg_date2]}</div>
        {regDate2:h} 
    </tr>
    
    <!--<tr>
    <td class="fieldName" width="50%">{translate(#Perms Are Out of Sync With Role#)}</td>
    <td align="left" width="50%">
    {permSync:h}</td>
    </tr>-->
    
    <tr>
        <td class="fieldName" width="50%">{translate(#Status#)}</td>
        <td align="left" width="50%">
        <div class="error" flexy:if="error[status]">{error[status]}</div>
        <select name="search[status]">{generateSelect(status,search[status]):h}</select>
    </tr>
    
    <tr>
        <td valign="top" align="center" colspan="2">
        <input class="wideButton" name="submitted" value="{translate(#Search#)}" type="submit" />&nbsp; 
        <input class="wideButton" type="button" value="{translate(#Cancel#)}" onclick="javascript:document.location.href='{makeUrl(##,#user#,#user#)}'" /> 
        </td>
    </tr>

</table>
</form>
