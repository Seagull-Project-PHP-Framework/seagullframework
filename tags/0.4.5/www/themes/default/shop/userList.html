<script language="JavaScript">
<!--
function selectAll(mode, i) {
    if (i == 1) {
        obj = document.forms['users'].elements;
    } else {
        obj = document.forms['users'].elements;
    };
    
    for (i = 0; i < obj.length; i++)
        if (obj[i].name == 'frmDelete[]') obj[i].checked = mode;
    
}

function selchkAll(chk, i) {
    if (chk.checked) {
        selectAll(true, i);
    }
    else {
        selectAll(false, i);
    }
}
-->
</script>
<flexy:include src="resourceChooser.html" />
<div align="center">
<a href="{makeUrl()}">{translate(#General discount list#)}</a> &nbsp; &nbsp;
<a href="{makeUrl(#listProd#)}">{translate(#Product discount list#)}</a>
</div> 

    <h1 class="pageTitle">{translate(pageTitle)}</h1>
    <span flexy:if="msgGet()">{msgGet()}</span> 
    {if:pager}<flexy:include src="pager.html" />{end:}

<form name="users_add" method="post" flexy:ignore id="users_add">
  <input type="hidden" name="action" value="insert" />
  <table class="wide">
  	<tr><th>{translate(#Username#)}</th>
		
      <th width="60">{translate(#Discount#)}</th>
    </tr>
    <tr class="{switchRowClass()}"> 
      <td><div class="error" flexy:if="error[usr_id]">{error[usr_id]} </div>
	    <select name="usr_id" id="usr_id" size="1">
	 	  <option value="0">Select one user...</option>
	    	{userList:h}
		  </select></td>
      <td width="60"> 
        <div class="error" flexy:if="error[discount]">{error[discount]} </div>
        <input name="discount" type="text" value="0" size="4" maxlength="3">
        %</td>
    </tr>
    <tr> 
      <td colspan="2">
        <input type="submit" name="add" value="{translate(#Add user#)}" /></td>
    </tr>
  </table>
</form>

 <form name="users" method="post" flexy:ignore id="users">
    <input type="hidden" name="action" value="delete" />   
  <table class="wide">
    <tr> 
      <th width="5"><div align="center"><input type="checkbox" name="selAll" value="checkbox" onclick="selchkAll(this, 1);"></div></th>
      <th width="10"><a class="header" href="{makeUrl(##)}frmSortBy/usr_id/frmSortOrder/{sortOrder}/">{translate(#ID#)}</a></th>
      <th><a class="header" href="{makeUrl(##)}frmSortBy/username/frmSortOrder/{sortOrder}/">{translate(#Username#)}</a></th> 
      <th><a class="header" href="{makeUrl(##)}frmSortBy/frmSortBy/email/frmSortOrder/{sortOrder}/">{translate(#Email#)}</a></th>
      <th width="20" align="center"><a class="header" href="{makeUrl(##)}frmSortBy/is_acct_active/frmSortOrder/{sortOrder}/">{translate(#Status#)}</a></th>
      <th width="60"><a class="header" href="{makeUrl(##)}frmSortBy/discount/frmSortOrder/{sortOrder}/">{translate(#Discount#)}</a></th>
    </tr>
    <tr class="{switchRowClass()}" flexy:foreach="aPagedData[data],key,aValue"> 
      <td align="center"><input class="noBorder" type="checkbox" name="frmDelete[]" value="{aValue[usr_id]}" /></td>
      <td>{aValue[usr_id]}</td>
      <td>{aValue[username]}</td>
      <td>{aValue[email]}</td>
      <td align="center">{if:aValue[is_acct_active]} {translate(#Active#)} {else:} 
        {translate(#Disabled#)} {end:}</td>
      <td width="60" align="right">{aValue[discount]} % </td>
    </tr>
    <tr> 
      <td colspan="7">{translate(#With selected user(s)#)}: 
        <input type="submit" name="delete" value="{translate(#delete#)}" onclick="return confirmSubmit('{translate(#user#)}', 'users')" /></td>
    </tr>
  </table>
</form>

